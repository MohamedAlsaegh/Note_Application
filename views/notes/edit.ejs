<%- include('../partials/navbar') %>

<div class="main-edit">
  <h2>Edit Your Note</h2>

  <form action="/notes/<%= note._id %>?_method=PUT" method="POST">
    <input
      type="text"
      name="title"
      value="<%= note.title %>"
      placeholder="Enter a new title"
      required
    />

<textarea
  name="content"
  rows="4"
  placeholder="Update your content..."
  required
><%= note.content %></textarea>

    

    <label for="tag">Tag</label>
    <select name="tag" id="tag" required>
      <% allTags.forEach(tag => { %>
        <option value="<%= tag %>" <%= note.tag === tag ? 'selected' : '' %>>
        <%= tag %>
        </option>
     <% }) %>
</select>

    <label>
      <input type="hidden" name="isCompleted" value="false" />
      <input type="checkbox" name="isCompleted" <%= note.isCompleted ? 'checked'
      : '' %> /> Mark as completed
    </label>

    <input type="hidden" name="userId" value="<%= note.userId %>" />

    <button type="submit">💾 Save Changes</button>
    <a href="/notes/show">Cancel</a>
  </form>

  <form
    action="/notes/<%= note._id %>?_method=DELETE"
    method="POST"
    onsubmit="return confirm('Are you sure you want to delete this note?')"
  >
    <button type="submit" class="delete-btn">🗑️ Delete Note</button>
  </form>
</div>
