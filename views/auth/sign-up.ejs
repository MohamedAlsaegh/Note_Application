<%- include('../partials/navbar.ejs') %>

<h2>Sign Up</h2>
<form action="/auth/sign-up" method="POST" enctype="multipart/form-data">

  <input type="text" name="username" id="username" placeholder="Username" />
  <br />
  <input type="text" name="about" id="about" placeholder="About You" />
  <br />

  <input type="password" name="password" placeholder="Password" required />
  <br />
  <input
    type="password"
    name="confirmPassword"
    placeholder="Confirm Password"
    required
  />
  <br />

  <input type="file" name="image" id="imageInput" accept="image/*" />
  <br />

  <img id="imagePreview" src="#" alt="Image Preview" style="max-width: 200px; display: none;" />

  <button type="submit">Sign Up</button>
</form>

<script>
  const imageInput = document.getElementById('imageInput');
  const imagePreview = document.getElementById('imagePreview');

  imageInput.addEventListener('change', function () {
    const file = this.files[0];

    if (file) {
      const reader = new FileReader();

      reader.onload = function (e) {
        imagePreview.src = e.target.result;
        imagePreview.style.display = 'block'; // show the image
      };

      reader.readAsDataURL(file); // read the file as base64
    } else {
      imagePreview.src = '#';
      imagePreview.style.display = 'none'; // hide if no file selected
    }
  });
</script>
